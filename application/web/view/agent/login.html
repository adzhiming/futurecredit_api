<!DOCTYPE html>
<html lang="en" ng-app="indexapp">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
        <link rel="shortcut icon" href="__ASSETS__/agent/img//favicon.ico" type="image/x-icon">
        <title>聚合共享</title>
    </head>
<script type="text/javascript">
    var deviceWidth = document.documentElement.clientWidth;
    if (deviceWidth > 750) deviceWidth = 750;
    document.documentElement.style.fontSize = deviceWidth / 7.5 + 'px';
</script>
<link rel="stylesheet" type="text/css" href="__ASSETS__/agent/css/common.css" />
<link rel="stylesheet" type="text/css" href="__ASSETS__/agent/css/other.css" />
<style type="text/css">
    html,body{
        width:100%;height:100%;background:url('__ASSETS__agent/img/sq_bg.jpg')no-repeat;
        overflow:hidden;background-size:100% 100%;
    }
    .ge{color:#fff;margin:0px 0.3rem;}
</style>
<body>

<!-- <div id="header" class="text-center">
   代理登陆
</div>
<div class="header-gao"></div>
<div>
    <img src="__ASSETS__/agent/img/dluy.png" class="img-responsive" />
</div> -->
<div class="header-logo">
    <img src="__ASSETS__agent/img/sq-logo.png"/>
</div>

<div class="login-box">
    <form action="" name="form1" id="mesg">
        <div>
            <input type="text" name="username" placeholder="请输入账号" class="ipt1">
        </div>
        <div>
            <input type="password" name="password" placeholder="请输入密码" class="ipt2">
        </div>
        <div class="tip text-center error paddingtop15" style="display:none;"></div>
        <div class="login">
            <input type="button"  value="登录" onclick="login()">
            <div class="text-center">
                <a class="op"  href="apply">如何申请推广员？</a>
                <span class="ge"></span>
                <a href="misspass" class="op">忘记密码</a>
            </div>
        </div>
    </form>
    

</div>
<script type="text/javascript" src="__ASSETS__/agent/js/jquery.js"></script>
<script type="text/javascript" src="__ASSETS__/agent/js/store.legacy.min.js"></script>
<script type="text/javascript">
     function login(){
        var name = $('input[name="username"]').val();
        var pass = $('input[name="password"]').val();

        if(name == ''){
            $('.tip').show().text('请输入账户');
            return 
        }else if(pass == ''){
            $('.tip').show().text('请输入密码');
            return
        }else{
            $('.tip').hide().text('');
        }
        
        var api_url = "{$api_url}";
        $.ajax({
    	    type: 'POST',
            url: api_url+"agent/login",
            data:{
           	 phone:name,
           	 password:pass,
            },
            headers: {
                "Access-Control-Allow-Origin":"http://example.edu",
                "Access-Control-Allow-Headers":"X-Requested-With"
            },
            success: function(res) {
           	 if(res.code == 1){
                    zdyAlert.init(res.msg,function(){
                        store.set('userInfo',res.data);
                        store.set('topassword',res.data.token);
                        window.location.href="index";
                    })
                }else{
                    zdyAlert.init(res.msg,function(){
                    })
                }
            }
        })
     }
     
    var zdyAlert = {
        init:function(e,callback){
            var html = '<div class="alertcen"></div>';
            html += '<div class="alertnei box-show"><p class="title">提示</p><div class="alert-con">'+ e +'</div><div class="alert-btn">确定</div></div>';
            $('body').append(html);
            $('.alert-btn').click(function(){
                $('.alertcen,.alertnei').remove();
                callback();
            })
        }
    }

    
</script>
</body>
</html>

